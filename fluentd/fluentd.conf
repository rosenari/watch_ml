<source>
  @type forward
  port 24224
</source>

# 디버깅용 설정
<filter **>
  @type stdout
</filter>

# backend 서비스 로그 수집
<match backend.**>
  @type copy
  <store>
    @type elasticsearch
    host elasticsearch
    port 9200
    user "elastic"              # Elasticsearch 사용자 이름
    password "devpassword"          # Elasticsearch 비밀번호
    logstash_format false  # logstash 형식 비활성화
    index_name backend-logs  # 인덱스를 backend-logs로 지정
    include_tag_key true
    type_name backend_log
    tag_key @log_name
    flush_interval 1s
  </store>
</match>

# celery_worker 서비스 로그 수집
<match celery_worker>
  @type elasticsearch
  host elasticsearch
  port 9200
  user "elastic"              # Elasticsearch 사용자 이름
  password "devpassword"          # Elasticsearch 비밀번호
  index_name celery-worker-logs
  type_name celery_worker_log
  logstash_format false
  include_tag_key true
  tag_key @log_name
</match>